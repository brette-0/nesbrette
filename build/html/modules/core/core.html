<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>core &#8212; nesbrette 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css?v=2bf1fcf8" />
    
    <script src="../../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="synth" href="../synth/synth.html" />
    <link rel="prev" title="header" href="header.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../synth/synth.html" title="synth"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="header.html" title="header"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">nesbrette 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../modules.html" accesskey="U"><code class="docutils literal notranslate"><span class="pre">Modules</span></code></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="docutils literal notranslate"><span class="pre">core</span></code></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="core">
<h1><code class="docutils literal notranslate"><span class="pre">core</span></code><a class="headerlink" href="#core" title="Link to this heading">¶</a></h1>
<p>To refer to how to use <code class="docutils literal notranslate"><span class="pre">nesbrette</span></code> core features, please refer to <a class="reference external" href="https://nesbrette.readthedocs.io/en/latest/index.html">tutorials</a> .Use of the following methods will not yield immediate benefit, the <code class="docutils literal notranslate"><span class="pre">core</span></code> member set is designed to clarify and optimise nesbrette engine behaviors and therefore should only really be used for advanced expansions of <code class="docutils literal notranslate"><span class="pre">nesbrette</span></code>.</p>
<section id="itype-label-identify-type">
<h2><code class="docutils literal notranslate"><span class="pre">itype</span> <span class="pre">label:</span></code> - Identify Type<a class="headerlink" href="#itype-label-identify-type" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">macro</span> <span class="n">MyMacro</span> <span class="n">__param__</span>

    <span class="n">paramtype</span> <span class="o">=</span> <span class="n">itype</span> <span class="n">__param__</span>
    <span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">isnum</span> <span class="n">paramtype</span><span class="p">)</span>
        <span class="o">.</span><span class="n">out</span> <span class="s2">&quot;It is a Number!&quot;</span>
    <span class="o">.</span><span class="k">else</span>
        <span class="o">.</span><span class="n">out</span> <span class="s2">&quot;It is not a Number!&quot;</span>
    <span class="o">.</span><span class="n">endif</span>
<span class="o">.</span><span class="n">endmacro</span>
</pre></div>
</div>
</section>
<section id="signed-token-query-sign-type">
<h2><code class="docutils literal notranslate"><span class="pre">signed</span> <span class="pre">token</span></code> - Query Sign Type<a class="headerlink" href="#signed-token-query-sign-type" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">macro</span> <span class="n">MyMacro</span> <span class="n">__param__</span>

    <span class="n">paramtype</span> <span class="o">=</span> <span class="n">itype</span> <span class="n">__param__</span>
    <span class="o">.</span><span class="k">if</span> <span class="n">signed</span> <span class="n">paramtype</span>
        <span class="o">.</span><span class="n">warning</span> <span class="s2">&quot;Signed operation is slower!&quot;</span>
    <span class="o">.</span><span class="n">endif</span>
<span class="o">.</span><span class="n">endmacro</span>
</pre></div>
</div>
</section>
<section id="endian-token-query-sign-type">
<h2><code class="docutils literal notranslate"><span class="pre">endian</span> <span class="pre">token</span></code> - Query Sign Type<a class="headerlink" href="#endian-token-query-sign-type" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">macro</span> <span class="n">MyMacro</span> <span class="n">__param__</span>

    <span class="n">paramtype</span> <span class="o">=</span> <span class="n">itype</span> <span class="n">__param__</span>
    <span class="o">.</span><span class="k">if</span> <span class="n">endian</span> <span class="n">paramtype</span>
        <span class="o">.</span><span class="n">warning</span> <span class="s2">&quot;Big Endian operation is inappropriate!&quot;</span>
    <span class="o">.</span><span class="n">endif</span>
<span class="o">.</span><span class="n">endmacro</span>
</pre></div>
</div>
</section>
<section id="eindex-int-int-endian-index">
<h2><code class="docutils literal notranslate"><span class="pre">eindex</span> <span class="pre">int:,</span> <span class="pre">int</span></code> - Endian Index<a class="headerlink" href="#eindex-int-int-endian-index" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lda</span> <span class="n">eindex</span> <span class="n">Health</span><span class="p">,</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="type-type-label-type-of">
<h2><code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">type:</span> <span class="pre">label</span></code> - Type of<a class="headerlink" href="#type-type-label-type-of" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.macro MyMacro __param__

    paramtype = itype __param__
        ; this must be stored (gc issue?)
.endmacro
</pre></div>
</div>
</section>
<section id="typeval-int-value-segment-from-type">
<h2><code class="docutils literal notranslate"><span class="pre">typeval</span> <span class="pre">int</span></code> - Value Segment from Type<a class="headerlink" href="#typeval-int-value-segment-from-type" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">macro</span> <span class="n">MyMacro</span> <span class="n">__param__</span>

    <span class="n">paramtype</span> <span class="o">=</span> <span class="n">itype</span> <span class="n">__param__</span>
    <span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">typeval</span> <span class="n">paramtype</span><span class="p">)</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="o">.</span><span class="n">warning</span> <span class="s2">&quot;64bit Math is Expensive!&quot;</span>
    <span class="o">.</span><span class="n">endif</span>
<span class="o">.</span><span class="n">endmacro</span>
</pre></div>
</div>
</section>
<section id="typeas-label-type-allocate-type-define">
<h2><code class="docutils literal notranslate"><span class="pre">typeas</span> <span class="pre">label,</span> <span class="pre">type</span></code> - Allocate Type Define<a class="headerlink" href="#typeas-label-type-allocate-type-define" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Score = $0300
typeas Score, u32
</pre></div>
</div>
</section>
<section id="label-typed-access-parameter-label">
<h2><code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">typed:</span></code> - Access Parameter Label<a class="headerlink" href="#label-typed-access-parameter-label" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">macro</span> <span class="n">MyMacro</span> <span class="n">__param__</span>

    <span class="o">.</span><span class="n">out</span> <span class="o">.</span><span class="n">sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">label</span> <span class="n">__param__</span><span class="p">)</span>
<span class="o">.</span><span class="n">endmacro</span>
</pre></div>
</div>
</section>
<section id="ilabel-typed-identify-parameter-label">
<h2><code class="docutils literal notranslate"><span class="pre">ilabel</span> <span class="pre">typed:</span></code> - Identify Parameter Label<a class="headerlink" href="#ilabel-typed-identify-parameter-label" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.macro MyMacro __param__
    .local temp

    temp = ilabel __param__

    .if temp &gt; $8000
        .fatal &quot;Cannot store to ROM&quot;
    .else
        sta temp
    .endif
.endmacro
</pre></div>
</div>
<p>Yields the parameter label Identify, must be stored before use. Retains Scope of caller and scope lexis cannot be passed down because <code class="docutils literal notranslate"><span class="pre">.ident</span></code> (native <code class="docutils literal notranslate"><span class="pre">ca65</span></code> preprocessor directive) cannot identify scopes and is, therefore, scope constrained.</p>
</section>
<section id="dedtype-int-deduce-type">
<h2><code class="docutils literal notranslate"><span class="pre">dedtype</span> <span class="pre">int</span></code> - Deduce Type<a class="headerlink" href="#dedtype-int-deduce-type" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lda</span> <span class="n">VRAM_BUFFER_LEN</span>
<span class="n">clc</span>
<span class="n">adc</span> <span class="c1">#(dedtype Score)</span>
<span class="n">sta</span> <span class="n">VRAM_BUFFER_LEN</span>
</pre></div>
</div>
<p>This function fetches the type assigned to the token passed. The token can always be evluated as <code class="docutils literal notranslate"><span class="pre">t_{token}</span></code> and should always have the same scope as the target token.</p>
</section>
<section id="isnum-int-is-type-numerical">
<h2><code class="docutils literal notranslate"><span class="pre">isnum</span> <span class="pre">int</span></code> - Is Type Numerical?<a class="headerlink" href="#isnum-int-is-type-numerical" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">isnum</span> <span class="n">Score</span><span class="p">)</span>
    <span class="o">.</span><span class="n">out</span> <span class="s2">&quot;Score is number, passing...&quot;</span>
<span class="o">.</span><span class="k">else</span>
    <span class="o">.</span><span class="n">fatal</span> <span class="s2">&quot;Failed : Incorrect Type&quot;</span>
<span class="o">.</span><span class="n">endif</span>
</pre></div>
</div>
</section>
<section id="isconst-int-is-type-preprocesor-constant">
<h2><code class="docutils literal notranslate"><span class="pre">isconst</span> <span class="pre">int</span></code> - Is Type Preprocesor Constant?<a class="headerlink" href="#isconst-int-is-type-preprocesor-constant" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">isconst</span> <span class="n">Score</span><span class="p">)</span>
    <span class="o">.</span><span class="n">out</span> <span class="s2">&quot;Score is Constant, passing...&quot;</span>
<span class="o">.</span><span class="k">else</span>
    <span class="o">.</span><span class="n">fatal</span> <span class="s2">&quot;Failed : Incorrect Type&quot;</span>
<span class="o">.</span><span class="n">endif</span>
</pre></div>
</div>
</section>
<section id="detype-type-token-decode-typing">
<h2><code class="docutils literal notranslate"><span class="pre">detype</span> <span class="pre">type?:</span> <span class="pre">token</span></code> - Decode Typing<a class="headerlink" href="#detype-type-token-decode-typing" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">temp</span> <span class="o">.</span><span class="n">set</span> <span class="mi">0</span>
<span class="n">detype</span> <span class="n">__param__</span><span class="p">,</span> <span class="n">temp</span>
        <span class="p">;</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">really</span> <span class="n">the</span> <span class="n">only</span> <span class="n">possible</span> <span class="n">way</span>

<span class="o">.</span><span class="k">if</span> <span class="n">temp</span> <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">detype</span></code> does <strong>not</strong> like untyped values, please validate against untyped tokens before attempting to pass them to a typed field.</p>
</div>
</section>
<section id="null-coalesce-int-null-coalesce">
<h2><code class="docutils literal notranslate"><span class="pre">null_coalesce</span> <span class="pre">int</span></code> - Null Coalesce<a class="headerlink" href="#null-coalesce-int-null-coalesce" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="k">if</span> <span class="n">__param__</span> <span class="o">=</span> <span class="n">null</span>
    <span class="n">__param__</span> <span class="o">.</span><span class="n">set</span> <span class="mi">10</span>
<span class="o">.</span><span class="n">endif</span>
</pre></div>
</div>
<p>Perhaps the one feature I really like about <code class="docutils literal notranslate"><span class="pre">C#</span></code> is how it handles <code class="docutils literal notranslate"><span class="pre">null</span></code> on the high level, so I decided that <a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-coalescing-operator">null-coalescence</a> should be created for <code class="docutils literal notranslate"><span class="pre">nesbrette</span></code> as the existence of <code class="docutils literal notranslate"><span class="pre">null</span></code> was already designed with type defaulting in mind.</p>
</section>
<section id="is-null-int-is-null">
<h2><code class="docutils literal notranslate"><span class="pre">is_null</span> <span class="pre">int</span></code> - is Null<a class="headerlink" href="#is-null-int-is-null" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">is_null</span> <span class="n">__param__</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fatal</span> <span class="s2">&quot;NullReferenceException said C sharp&quot;</span>
<span class="o">.</span><span class="n">endif</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">null</span></code> is define as type ‘<code class="docutils literal notranslate"><span class="pre">i0</span></code>’ in which typelessness is ‘<code class="docutils literal notranslate"><span class="pre">u0</span></code>’, it can also be evaluated by comparing it to <code class="docutils literal notranslate"><span class="pre">(1</span> <span class="pre">&lt;&lt;</span> <span class="pre">31)</span></code>.</p>
</section>
<section id="setreg-int-set-register">
<h2><code class="docutils literal notranslate"><span class="pre">setreg</span> <span class="pre">int</span></code> - Set Register<a class="headerlink" href="#setreg-int-set-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">thisreg</span> <span class="o">=</span> <span class="n">setreg</span> <span class="n">__param__</span>
</pre></div>
</div>
</section>
<section id="setireg-int-set-indexing-register">
<h2><code class="docutils literal notranslate"><span class="pre">setireg</span> <span class="pre">int</span></code> - Set Indexing Register<a class="headerlink" href="#setireg-int-set-indexing-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">thisireg</span> <span class="o">=</span> <span class="n">setireg</span> <span class="n">__param__</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above <code class="docutils literal notranslate"><span class="pre">setreg</span></code> and <code class="docutils literal notranslate"><span class="pre">setireg</span></code> expects unvalidated parameters to error check against the register indicator enums. It should be noted that these operations do not have contextual memory for prior calls within scope and therefore will not yield an error if two registers are requested for differing operations. The function will return <code class="docutils literal notranslate"><span class="pre">null</span></code> for GPR indicating failure, response is offloaded to handler.</p>
</div>
</section>
<section id="confined-int-int-if-confined">
<h2><code class="docutils literal notranslate"><span class="pre">confined</span> <span class="pre">int,</span> <span class="pre">int</span></code> - If Confined<a class="headerlink" href="#confined-int-int-if-confined" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ArrayStart = $3fe
typeas ArrayStart, u32

.if !(confined ArrayStart)
    .fatal &quot;Cannot Mitigate Page Overlap&quot;
.endif
</pre></div>
</div>
<p>Simply encaging your code within a page can reduce the amount of updates needed, especially if using <code class="docutils literal notranslate"><span class="pre">SMC</span></code> - inevitably page confinement imposes an ‘artificial’ limit to the member’s capability - but a good solution often can exceed typical demand while obeying page confinement which overall leads to more optimised code.</p>
</section>
<section id="index-array-int-index-array">
<h2><code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">array,</span> <span class="pre">int</span></code> - Index Array<a class="headerlink" href="#index-array-int-index-array" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">define</span> <span class="n">MyArray</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>

<span class="o">.</span><span class="n">out</span> <span class="o">.</span><span class="n">sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">index</span> <span class="n">MyArray</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="append-array-token-append-array">
<h2><code class="docutils literal notranslate"><span class="pre">append</span> <span class="pre">array,</span> <span class="pre">token</span></code> - Append Array<a class="headerlink" href="#append-array-token-append-array" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">define</span> <span class="n">Array</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
<span class="n">append</span> <span class="n">Array</span><span class="p">,</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="isarray-token-is-array">
<h2><code class="docutils literal notranslate"><span class="pre">isArray</span> <span class="pre">token</span></code> - Is Array<a class="headerlink" href="#isarray-token-is-array" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">define</span> <span class="n">MyArray</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>

<span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">isArray</span> <span class="n">MyArray</span><span class="p">)</span>
    <span class="o">.</span><span class="n">out</span> <span class="s2">&quot;Woah, that&#39;s sure a lot of numbers&quot;</span>
<span class="o">.</span><span class="k">else</span>
    <span class="o">.</span><span class="n">out</span> <span class="s2">&quot;boo, too few numbers&quot;</span>
<span class="o">.</span><span class="n">endif</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Expect vast quantities of logical/syntax errors when using preprocessor arrays as they were not designed mutable and poor handling of them is likely to cause problems. I wouldn’t (unless you truly believe in your skills) form a dependancy on these at your backend for threat of catastrophic code debt.</p>
</div>
</section>
<section id="ispo2-int-is-power-of-two">
<h2><code class="docutils literal notranslate"><span class="pre">ispo2</span> <span class="pre">int</span></code> - Is Power of two?<a class="headerlink" href="#ispo2-int-is-power-of-two" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="k">if</span> <span class="p">(</span><span class="n">ispo2</span> <span class="n">__param__</span><span class="p">)</span>
    <span class="p">;</span> <span class="n">optimized</span> <span class="n">mode</span>
<span class="o">.</span><span class="k">else</span>
    <span class="p">;</span> <span class="n">suboptimal</span> <span class="n">mode</span>
<span class="o">.</span><span class="n">endif</span>
</pre></div>
</div>
</section>
<section id="abs-int-absolute">
<h2><code class="docutils literal notranslate"><span class="pre">abs</span> <span class="pre">int</span></code> - Absolute<a class="headerlink" href="#abs-int-absolute" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lda</span> <span class="c1">#(abs ExtremeValue)</span>
</pre></div>
</div>
</section>
<section id="insert-header-insert-header">
<h2><code class="docutils literal notranslate"><span class="pre">insert_header</span></code> - Insert Header<a class="headerlink" href="#insert-header-insert-header" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">segment</span> <span class="s2">&quot;HEADER&quot;</span>
<span class="n">insert_header</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The specification used with <code class="docutils literal notranslate"><span class="pre">insert_header</span></code> is <a class="reference external" href="https://www.nesdev.org/wiki/NES_2.0">iNES</a> 2. <code class="docutils literal notranslate"><span class="pre">insert__header</span></code> is the define that indicates if <code class="docutils literal notranslate"><span class="pre">core</span></code> has been included. There is no reason to use any other format than <code class="docutils literal notranslate"><span class="pre">iNES2</span></code> as of writing this. To fully use <code class="docutils literal notranslate"><span class="pre">insert_header</span></code> the user will need to modify the <code class="docutils literal notranslate"><span class="pre">header</span></code> constants in <code class="docutils literal notranslate"><span class="pre">template/{scope}/constants.asm</span></code>.</p>
</div>
</section>
<section id="inr-gpr-incrment-register">
<h2><code class="docutils literal notranslate"><span class="pre">inr</span> <span class="pre">gpr</span></code> - Incrment Register<a class="headerlink" href="#inr-gpr-incrment-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>inreg = xr

@timer:
    ldr ar:: tar, inreg
    inr
    rcp inreg:: $30
    bne @timer
</pre></div>
</div>
</section>
<section id="der-gpr-decrment-register">
<h2><code class="docutils literal notranslate"><span class="pre">der</span> <span class="pre">gpr</span></code> - Decrment Register<a class="headerlink" href="#der-gpr-decrment-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">xr</span>

<span class="nd">@timer</span><span class="p">:</span>
    <span class="n">ldr</span> <span class="n">ar</span><span class="p">::</span> <span class="n">tar</span><span class="p">,</span> <span class="n">inreg</span>
    <span class="n">der</span>
    <span class="n">bne</span> <span class="nd">@timer</span>
</pre></div>
</div>
</section>
<section id="tar-gpr-transfer-a-to-register">
<h2><code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">gpr</span></code> - Transfer A to Register<a class="headerlink" href="#tar-gpr-transfer-a-to-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">xr</span>

<span class="n">tar</span> <span class="n">inreg</span>   <span class="p">;</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">x</span>
</pre></div>
</div>
</section>
<section id="tyr-gpr-transfer-y-to-register">
<h2><code class="docutils literal notranslate"><span class="pre">tyr</span> <span class="pre">gpr</span></code> - Transfer Y to Register<a class="headerlink" href="#tyr-gpr-transfer-y-to-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">xr</span>

<span class="n">tyr</span> <span class="n">inreg</span>   <span class="p">;</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">x</span>
</pre></div>
</div>
</section>
<section id="txr-gpr-transfer-x-to-register">
<h2><code class="docutils literal notranslate"><span class="pre">txr</span> <span class="pre">gpr</span></code> - Transfer X to Register<a class="headerlink" href="#txr-gpr-transfer-x-to-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">yr</span>

<span class="n">txr</span> <span class="n">inreg</span>   <span class="p">;</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">y</span>
</pre></div>
</div>
</section>
<section id="tra-gpr-transfer-register-to-a">
<h2><code class="docutils literal notranslate"><span class="pre">tra</span> <span class="pre">gpr</span></code> - Transfer Register to a<a class="headerlink" href="#tra-gpr-transfer-register-to-a" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">yr</span>

<span class="n">tra</span> <span class="n">inreg</span>   <span class="p">;</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">a</span>
</pre></div>
</div>
</section>
<section id="try-gpr-transfer-register-to-y">
<h2><code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">gpr</span></code> - Transfer Register to Y<a class="headerlink" href="#try-gpr-transfer-register-to-y" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">xr</span>

<span class="k">try</span> <span class="n">inreg</span>   <span class="p">;</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">y</span>
</pre></div>
</div>
</section>
<section id="trx-gpr-transfer-register-to-x">
<h2><code class="docutils literal notranslate"><span class="pre">trx</span> <span class="pre">gpr</span></code> - Transfer Register to X<a class="headerlink" href="#trx-gpr-transfer-register-to-x" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span> <span class="o">=</span> <span class="n">yr</span>

<span class="n">trx</span> <span class="n">inreg</span>   <span class="p">;</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">x</span>
</pre></div>
</div>
</section>
<section id="trr-gpr-gpr-transfer-register-to-register">
<h2><code class="docutils literal notranslate"><span class="pre">trr</span> <span class="pre">gpr:</span> <span class="pre">gpr</span></code> - Transfer Register to Register<a class="headerlink" href="#trr-gpr-gpr-transfer-register-to-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inreg</span>  <span class="o">=</span> <span class="n">yr</span>
<span class="n">outreg</span> <span class="o">=</span> <span class="n">xr</span>

<span class="n">trr</span> <span class="n">yr</span><span class="p">::</span><span class="n">xr</span>  <span class="p">;</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">x</span>
</pre></div>
</div>
</section>
<section id="ldr-gpr-mode-load-register">
<h2><code class="docutils literal notranslate"><span class="pre">ldr</span> <span class="pre">gpr:</span> <span class="pre">mode</span></code> - Load Register<a class="headerlink" href="#ldr-gpr-mode-load-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reg</span> <span class="o">=</span> <span class="n">ar</span>
<span class="n">ldr</span> <span class="n">reg</span><span class="p">::</span><span class="n">imm</span><span class="p">,</span> <span class="n">param</span>
<span class="n">bpl</span> <span class="nd">@task</span>
</pre></div>
</div>
</section>
<section id="str-gpr-mode-store-register">
<h2><code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">gpr:</span> <span class="pre">mode</span></code> - Store Register<a class="headerlink" href="#str-gpr-mode-store-register" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reg</span> <span class="o">=</span> <span class="n">yr</span>
<span class="nb">str</span> <span class="n">reg</span><span class="p">::</span><span class="n">wabs</span><span class="o">.</span> <span class="n">param</span>
</pre></div>
</div>
</section>
<section id="rcp-typed-register-compare">
<h2><code class="docutils literal notranslate"><span class="pre">rcp</span> <span class="pre">typed:</span></code> - Register Compare<a class="headerlink" href="#rcp-typed-register-compare" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reg</span> <span class="o">=</span> <span class="n">ar</span>
<span class="n">rcp</span> <span class="n">reg</span><span class="p">::</span><span class="n">zp</span><span class="p">,</span> <span class="n">yr</span>     <span class="p">;</span> <span class="n">needs</span> <span class="n">i6502</span>
<span class="n">bne</span> <span class="nd">@task</span>
<span class="n">rcp</span> <span class="n">reg</span><span class="p">::</span><span class="n">zpx</span><span class="p">,</span> <span class="n">memory</span>
<span class="n">bne</span> <span class="nd">@task</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">core</span></code></a><ul>
<li><a class="reference internal" href="#itype-label-identify-type"><code class="docutils literal notranslate"><span class="pre">itype</span> <span class="pre">label:</span></code> - Identify Type</a></li>
<li><a class="reference internal" href="#signed-token-query-sign-type"><code class="docutils literal notranslate"><span class="pre">signed</span> <span class="pre">token</span></code> - Query Sign Type</a></li>
<li><a class="reference internal" href="#endian-token-query-sign-type"><code class="docutils literal notranslate"><span class="pre">endian</span> <span class="pre">token</span></code> - Query Sign Type</a></li>
<li><a class="reference internal" href="#eindex-int-int-endian-index"><code class="docutils literal notranslate"><span class="pre">eindex</span> <span class="pre">int:,</span> <span class="pre">int</span></code> - Endian Index</a></li>
<li><a class="reference internal" href="#type-type-label-type-of"><code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">type:</span> <span class="pre">label</span></code> - Type of</a></li>
<li><a class="reference internal" href="#typeval-int-value-segment-from-type"><code class="docutils literal notranslate"><span class="pre">typeval</span> <span class="pre">int</span></code> - Value Segment from Type</a></li>
<li><a class="reference internal" href="#typeas-label-type-allocate-type-define"><code class="docutils literal notranslate"><span class="pre">typeas</span> <span class="pre">label,</span> <span class="pre">type</span></code> - Allocate Type Define</a></li>
<li><a class="reference internal" href="#label-typed-access-parameter-label"><code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">typed:</span></code> - Access Parameter Label</a></li>
<li><a class="reference internal" href="#ilabel-typed-identify-parameter-label"><code class="docutils literal notranslate"><span class="pre">ilabel</span> <span class="pre">typed:</span></code> - Identify Parameter Label</a></li>
<li><a class="reference internal" href="#dedtype-int-deduce-type"><code class="docutils literal notranslate"><span class="pre">dedtype</span> <span class="pre">int</span></code> - Deduce Type</a></li>
<li><a class="reference internal" href="#isnum-int-is-type-numerical"><code class="docutils literal notranslate"><span class="pre">isnum</span> <span class="pre">int</span></code> - Is Type Numerical?</a></li>
<li><a class="reference internal" href="#isconst-int-is-type-preprocesor-constant"><code class="docutils literal notranslate"><span class="pre">isconst</span> <span class="pre">int</span></code> - Is Type Preprocesor Constant?</a></li>
<li><a class="reference internal" href="#detype-type-token-decode-typing"><code class="docutils literal notranslate"><span class="pre">detype</span> <span class="pre">type?:</span> <span class="pre">token</span></code> - Decode Typing</a></li>
<li><a class="reference internal" href="#null-coalesce-int-null-coalesce"><code class="docutils literal notranslate"><span class="pre">null_coalesce</span> <span class="pre">int</span></code> - Null Coalesce</a></li>
<li><a class="reference internal" href="#is-null-int-is-null"><code class="docutils literal notranslate"><span class="pre">is_null</span> <span class="pre">int</span></code> - is Null</a></li>
<li><a class="reference internal" href="#setreg-int-set-register"><code class="docutils literal notranslate"><span class="pre">setreg</span> <span class="pre">int</span></code> - Set Register</a></li>
<li><a class="reference internal" href="#setireg-int-set-indexing-register"><code class="docutils literal notranslate"><span class="pre">setireg</span> <span class="pre">int</span></code> - Set Indexing Register</a></li>
<li><a class="reference internal" href="#confined-int-int-if-confined"><code class="docutils literal notranslate"><span class="pre">confined</span> <span class="pre">int,</span> <span class="pre">int</span></code> - If Confined</a></li>
<li><a class="reference internal" href="#index-array-int-index-array"><code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">array,</span> <span class="pre">int</span></code> - Index Array</a></li>
<li><a class="reference internal" href="#append-array-token-append-array"><code class="docutils literal notranslate"><span class="pre">append</span> <span class="pre">array,</span> <span class="pre">token</span></code> - Append Array</a></li>
<li><a class="reference internal" href="#isarray-token-is-array"><code class="docutils literal notranslate"><span class="pre">isArray</span> <span class="pre">token</span></code> - Is Array</a></li>
<li><a class="reference internal" href="#ispo2-int-is-power-of-two"><code class="docutils literal notranslate"><span class="pre">ispo2</span> <span class="pre">int</span></code> - Is Power of two?</a></li>
<li><a class="reference internal" href="#abs-int-absolute"><code class="docutils literal notranslate"><span class="pre">abs</span> <span class="pre">int</span></code> - Absolute</a></li>
<li><a class="reference internal" href="#insert-header-insert-header"><code class="docutils literal notranslate"><span class="pre">insert_header</span></code> - Insert Header</a></li>
<li><a class="reference internal" href="#inr-gpr-incrment-register"><code class="docutils literal notranslate"><span class="pre">inr</span> <span class="pre">gpr</span></code> - Incrment Register</a></li>
<li><a class="reference internal" href="#der-gpr-decrment-register"><code class="docutils literal notranslate"><span class="pre">der</span> <span class="pre">gpr</span></code> - Decrment Register</a></li>
<li><a class="reference internal" href="#tar-gpr-transfer-a-to-register"><code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">gpr</span></code> - Transfer A to Register</a></li>
<li><a class="reference internal" href="#tyr-gpr-transfer-y-to-register"><code class="docutils literal notranslate"><span class="pre">tyr</span> <span class="pre">gpr</span></code> - Transfer Y to Register</a></li>
<li><a class="reference internal" href="#txr-gpr-transfer-x-to-register"><code class="docutils literal notranslate"><span class="pre">txr</span> <span class="pre">gpr</span></code> - Transfer X to Register</a></li>
<li><a class="reference internal" href="#tra-gpr-transfer-register-to-a"><code class="docutils literal notranslate"><span class="pre">tra</span> <span class="pre">gpr</span></code> - Transfer Register to a</a></li>
<li><a class="reference internal" href="#try-gpr-transfer-register-to-y"><code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">gpr</span></code> - Transfer Register to Y</a></li>
<li><a class="reference internal" href="#trx-gpr-transfer-register-to-x"><code class="docutils literal notranslate"><span class="pre">trx</span> <span class="pre">gpr</span></code> - Transfer Register to X</a></li>
<li><a class="reference internal" href="#trr-gpr-gpr-transfer-register-to-register"><code class="docutils literal notranslate"><span class="pre">trr</span> <span class="pre">gpr:</span> <span class="pre">gpr</span></code> - Transfer Register to Register</a></li>
<li><a class="reference internal" href="#ldr-gpr-mode-load-register"><code class="docutils literal notranslate"><span class="pre">ldr</span> <span class="pre">gpr:</span> <span class="pre">mode</span></code> - Load Register</a></li>
<li><a class="reference internal" href="#str-gpr-mode-store-register"><code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">gpr:</span> <span class="pre">mode</span></code> - Store Register</a></li>
<li><a class="reference internal" href="#rcp-typed-register-compare"><code class="docutils literal notranslate"><span class="pre">rcp</span> <span class="pre">typed:</span></code> - Register Compare</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="header.html"
                          title="previous chapter"><code class="docutils literal notranslate"><span class="pre">header</span></code></a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../synth/synth.html"
                          title="next chapter"><code class="docutils literal notranslate"><span class="pre">synth</span></code></a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/modules/core/core.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../synth/synth.html" title="synth"
             >next</a> |</li>
        <li class="right" >
          <a href="header.html" title="header"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">nesbrette 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../modules.html" ><code class="docutils literal notranslate"><span class="pre">Modules</span></code></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="docutils literal notranslate"><span class="pre">core</span></code></a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Brette.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>